const apiKey="cc5e154eef1a5f4b837eb970b7b620d1",baseUrl="https://api.themoviedb.org/3",NO_POSTER="https://i.ibb.co/r76r6Vt/oie-30214851-Ms-Wl-PTS0.png",galleryMovies=document.querySelector(".cards-home-movies");let page=1;async function fetchPopularMovie(e){const a=new URL(`${baseUrl}/trending/movie/week`);a.searchParams.append("api_key",apiKey),a.searchParams.append("page",e);const n=await fetch(a);return await n.json()}async function fetchMostPopularMovies(){const e=new URL(`${baseUrl}/trending/movie/day`);e.searchParams.append("api_key",apiKey);const a=await fetch(e);return await a.json()}async function fetchMovieId(e){const a=new URL(`${baseUrl}/movie/${e}`);a.searchParams.append("api_key",apiKey);const n=await fetch(a);return await n.json()}async function fetchGenres(){const e=new URL(`${baseUrl}/genre/movie/list`);e.searchParams.append("api_key",apiKey);const a=await fetch(e);return(await a.json()).genres}function getGenres(e,a){const n=[];for(const t of a){if("N/A"===e||0===e.length){n.push("Other");break}e.includes(t.id)&&n.push(t.name)}return n.length>2&&n.splice(2,n.length-2,"Other"),n.join(", ")}async function renderPopularMovies(e){const a=await fetchGenres();return e.map((({id:n,poster_path:t,title:s,release_date:i,genre_ids:o,original_title:r,popularity:c,overview:p}=e)=>{const d=t?`https://image.tmdb.org/t/p/w500${t}`:NO_POSTER,l=i?i.split("-")[0]:"Unknown",h=o?getGenres(o,a):"Unknown";return`\n      <li class='cards-home-movie_list_item' data-id="${n}" >\n      <div href="" class='cards-home-movie-link' id=${n}>\n      <div class="cards-home-movie-photo"\n        data-id="${n}"\n        data-poster_path="${t}"\n        data-title="${s}"\n        data-genre_ids="${h}"\n        data-original_title="${r}"\n        data-release_date="${i}"\n      ></div>\n        <img class="cards-home-movie-image" src=${d} alt='Poster ${r}' loading='lazy' />\n        <div class='cards-home-movie-info'>\n            <p class='cards-home-movie-title'>\n              <b>${s.toUpperCase()}</b>\n            </p>\n            <p class='cards-home-movie-date'>\n              <span>${h} | ${l}</span>\n            </p>\n        </div>\n        </div>\n      </li>\n      `})).join("")}fetchPopularMovie(page).then((e=>renderPopularMovies(e.results))).then((e=>{galleryMovies.insertAdjacentHTML("beforeend",e)}));
//# sourceMappingURL=index.5e1acbd0.js.map
