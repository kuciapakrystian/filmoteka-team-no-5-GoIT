!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).firebase=t()}(this,function(){"use strict";var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var p=function(){return(p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function f(e,o,s,c){return new(s=s||Promise)(function(n,t){function r(e){try{a(c.next(e))}catch(e){t(e)}}function i(e){try{a(c.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,i)}a((c=c.apply(e,o||[])).next())})}function h(n,r){var i,a,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,a&&(o=2&t[0]?a.return:t[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,t[1])).done)return o;switch(a=0,(t=o?[2&t[0],o.value]:t)[0]){case 0:case 1:o=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,a=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){s.label=t[1];break}if(6===t[0]&&s.label<o[1]){s.label=o[1],o=t;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(t);break}o[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],a=0}finally{i=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function d(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function o(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var t,n=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128):t[n++]=i>>12|224,t[n++]=i>>6&63|128),t[n++]=63&i|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,c=i+2<e.length,u=c?e[i+2]:0,l=(15&s)<<2|u>>6,u=63&u;c||(u=64,o||(l=64)),r.push(n[a>>2],n[(3&a)<<4|s>>4],n[l],n[u])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(n(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i,a,o,s=e[n++];s<128?t[r++]=String.fromCharCode(s):191<s&&s<224?(a=e[n++],t[r++]=String.fromCharCode((31&s)<<6|63&a)):239<s&&s<365?(i=((7&s)<<18|(63&(a=e[n++]))<<12|(63&(o=e[n++]))<<6|63&e[n++])-65536,t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))):(a=e[n++],o=e[n++],t[r++]=String.fromCharCode((15&s)<<12|(63&a)<<6|63&o))}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,c=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==c)throw new u;r.push(a<<2|o>>4),64!==s&&(r.push(o<<4&240|s>>2),64!==c&&r.push(s<<6&192|c))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},u=(e(a,t=Error),a);function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="DecodeBase64StringError",e}var s=function(e){return t=n(e),i.encodeByteArray(t,!0).replace(/\./g,"");var t};function c(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=c(e[n],t[n]));return e}function l(){return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__}function g(){if("undefined"!=typeof document){try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}var e=e&&function(e){try{return i.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(e[1]);return e&&JSON.parse(e)}}function m(){try{return l()||function(){if("undefined"!=typeof process&&void 0!==process.env){var e=process.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||g()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}}var b=function(){var e;return null===(e=m())||void 0===e?void 0:e.config},y=(_.prototype.wrapCallback=function(n){var r=this;return function(e,t){e?r.reject(e):r.resolve(t),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(e):n(e,t))}},_);function _(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,t){n.resolve=e,n.reject=t})}function w(){try{return"object"==typeof indexedDB}catch(e){return}}function E(){return new Promise(function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})}var I,S=(e(T,I=Error),T);function T(e,t,n){var r=I.call(this,t)||this;return r.code=e,r.customData=n,r.name="FirebaseError",Object.setPrototypeOf(r,T.prototype),Error.captureStackTrace&&Error.captureStackTrace(r,C.prototype.create),r}var C=(A.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r,i=t[0]||{},a="".concat(this.service,"/").concat(e),o=this.errors[e],o=o?(r=i,o.replace(O,function(e,t){var n=r[t];return null!=n?String(n):"<".concat(t,"?>")})):"Error",o="".concat(this.serviceName,": ").concat(o," (").concat(a,").");return new S(a,o,i)},A);function A(e,t,n){this.service=e,this.serviceName=t,this.errors=n}var O=/\{\$([^}]+)}/g;function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function N(e,t){if(e===t)return 1;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return;var s=e[o],c=t[o];if(P(s)&&P(c)){if(!N(s,c))return}else if(s!==c)return}for(var u=0,l=r;u<l.length;u++){o=l[u];if(!n.includes(o))return}return 1}function P(e){return null!==e&&"object"==typeof e}function k(e,t){var n=new M(e,t);return n.subscribe.bind(n)}var M=(L.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},L.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},L.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},L.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=B),void 0===r.error&&(r.error=B),void 0===r.complete&&(r.complete=B);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),a},L.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},L.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},L.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})},L.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},L);function L(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}function B(){}var R=(j.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},j.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},j.prototype.setServiceProps=function(e){return this.serviceProps=e,this},j.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},j);function j(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}var F="[DEFAULT]",x=(U.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new y;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise},U.prototype.getImmediate=function(e){var t=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),n=null!==(n=null==e?void 0:e.optional)&&void 0!==n&&n;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(n)return null;throw e}},U.prototype.getComponent=function(){return this.component},U.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:F})}catch(e){}try{for(var r=d(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var a=v(i.value,2),o=a[0],s=a[1],c=this.normalizeInstanceIdentifier(o);try{var u=this.getOrInitializeService({instanceIdentifier:c});s.resolve(u)}catch(e){}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}},U.prototype.clearInstance=function(e){this.instancesDeferred.delete(e=void 0===e?F:e),this.instancesOptions.delete(e),this.instances.delete(e)},U.prototype.delete=function(){return f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(o(o([],v(t.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()})),!1),v(t.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()})),!1))];case 1:return e.sent(),[2]}})})},U.prototype.isComponentSet=function(){return null!=this.component},U.prototype.isInitialized=function(e){return this.instances.has(e=void 0===e?F:e)},U.prototype.getOptions=function(e){return this.instancesOptions.get(e=void 0===e?F:e)||{}},U.prototype.initialize=function(e){var t,n,r=(e=void 0===e?{}:e).options,r=void 0===r?{}:r,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error("".concat(this.name,"(").concat(i,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var a=this.getOrInitializeService({instanceIdentifier:i,options:r});try{for(var o=d(this.instancesDeferred.entries()),s=o.next();!s.done;s=o.next()){var c=v(s.value,2),u=c[0],l=c[1];i===this.normalizeInstanceIdentifier(u)&&l.resolve(a)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return a},U.prototype.onInit=function(e,t){var n=this.normalizeInstanceIdentifier(t),r=null!==(i=this.onInitCallbacks.get(n))&&void 0!==i?i:new Set;r.add(e),this.onInitCallbacks.set(n,r);var i=this.instances.get(n);return i&&e(i,n),function(){r.delete(e)}},U.prototype.invokeOnInitCallbacks=function(e,t){var n,r,i=this.onInitCallbacks.get(t);if(i)try{for(var a=d(i),o=a.next();!o.done;o=a.next()){var s=o.value;try{s(e,t)}catch(e){}}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}},U.prototype.getOrInitializeService=function(e){var t=e.instanceIdentifier,n=e.options,r=void 0===n?{}:n,n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(e=t)===F?void 0:e,options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(e){}return n||null},U.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=F),!this.component||this.component.multipleInstances?e:F},U.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},U);function U(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}var H=(z.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)},z.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},z.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new x(e,this);return this.providers.set(e,t),t},z.prototype.getProviders=function(){return Array.from(this.providers.values())},z);function z(e){this.name=e,this.providers=new Map}var V,q=[];(ln=V=V||{})[ln.DEBUG=0]="DEBUG",ln[ln.VERBOSE=1]="VERBOSE",ln[ln.INFO=2]="INFO",ln[ln.WARN=3]="WARN",ln[ln.ERROR=4]="ERROR",ln[ln.SILENT=5]="SILENT";function W(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=(new Date).toISOString(),a=G[t];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));console[a].apply(console,o(["[".concat(i,"]  ").concat(e.name,":")],n,!1))}}var $,K={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},J=V.INFO,G=((at={})[V.DEBUG]="log",at[V.VERBOSE]="log",at[V.INFO]="info",at[V.WARN]="warn",at[V.ERROR]="error",at),Y=(Object.defineProperty(X.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in V))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e},enumerable:!1,configurable:!0}),X.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?K[e]:e},Object.defineProperty(X.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(X.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),X.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,o([this,V.DEBUG],e,!1)),this._logHandler.apply(this,o([this,V.DEBUG],e,!1))},X.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,o([this,V.VERBOSE],e,!1)),this._logHandler.apply(this,o([this,V.VERBOSE],e,!1))},X.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,o([this,V.INFO],e,!1)),this._logHandler.apply(this,o([this,V.INFO],e,!1))},X.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,o([this,V.WARN],e,!1)),this._logHandler.apply(this,o([this,V.WARN],e,!1))},X.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,o([this,V.ERROR],e,!1)),this._logHandler.apply(this,o([this,V.ERROR],e,!1))},X);function X(e){this.name=e,this._logLevel=J,this._logHandler=W,this._userLogHandler=null,q.push(this)}function Z(o,t){for(var e=0,n=q;e<n.length;e++)!function(e){var a=null;t&&t.level&&(a=K[t.level]),e.userLogHandler=null===o?null:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.map(function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(function(e){return e}).join(" ");t>=(null!=a?a:e.logLevel)&&o({level:V[t].toLowerCase(),message:i,args:n,type:e.name})}}(n[e])}const Q=(t,e)=>e.some(e=>t instanceof e);let ee,te;const ne=new WeakMap,re=new WeakMap,ie=new WeakMap,ae=new WeakMap,oe=new WeakMap;let se={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return re.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ie.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return le(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function ce(r){return r!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(te=te||[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]).includes(r)?function(...e){return r.apply(fe(this),e),le(ne.get(this))}:function(...e){return le(r.apply(fe(this),e))}:function(e,...t){var n=r.call(fe(this),e,...t);return ie.set(n,e.sort?e.sort():[e]),le(n)}}function ue(e){return"function"==typeof e?ce(e):(e instanceof IDBTransaction&&(a=e,re.has(a)||(t=new Promise((e,t)=>{const n=()=>{a.removeEventListener("complete",r),a.removeEventListener("error",i),a.removeEventListener("abort",i)},r=()=>{e(),n()},i=()=>{t(a.error||new DOMException("AbortError","AbortError")),n()};a.addEventListener("complete",r),a.addEventListener("error",i),a.addEventListener("abort",i)}),re.set(a,t))),Q(e,ee=ee||[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])?new Proxy(e,se):e);var a,t}function le(e){if(e instanceof IDBRequest)return function(a){const e=new Promise((e,t)=>{const n=()=>{a.removeEventListener("success",r),a.removeEventListener("error",i)},r=()=>{e(le(a.result)),n()},i=()=>{t(a.error),n()};a.addEventListener("success",r),a.addEventListener("error",i)});return e.then(e=>{e instanceof IDBCursor&&ne.set(e,a)}).catch(()=>{}),oe.set(e,a),e}(e);if(ae.has(e))return ae.get(e);var t=ue(e);return t!==e&&(ae.set(e,t),oe.set(t,e)),t}const fe=e=>oe.get(e);function pe(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(e,t),s=le(o);return r&&o.addEventListener("upgradeneeded",e=>{r(le(o.result),e.oldVersion,e.newVersion,le(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),s.then(e=>{a&&e.addEventListener("close",()=>a()),i&&e.addEventListener("versionchange",()=>i())}).catch(()=>{}),s}const he=["get","getKey","getAll","getAllKeys","count"],de=["put","add","delete","clear"],ve=new Map;function ge(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t){if(ve.get(t))return ve.get(t);const i=t.replace(/FromIndex$/,""),a=t!==i,o=de.includes(i);if(i in(a?IDBIndex:IDBObjectStore).prototype&&(o||he.includes(i))){var n=async function(e,...t){var n=this.transaction(e,o?"readwrite":"readonly");let r=n.store;return a&&(r=r.index(t.shift())),(await Promise.all([r[i](...t),o&&n.done]))[0]};return ve.set(t,n),n}}}se={...$=se,get:(e,t,n)=>ge(e,t)||$.get(e,t,n),has:(e,t)=>!!ge(e,t)||$.has(e,t)};var me=(be.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(e){if("VERSION"!==(null==(t=e.getComponent())?void 0:t.type))return null;var t,t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}).filter(function(e){return e}).join(" ")},be);function be(e){this.container=e}var ye="@firebase/app",_e="0.9.3-canary.b30186ffc",we=new Y("@firebase/app"),Ee="[DEFAULT]",Ie=((Ne={})[ye]="fire-core",Ne["@firebase/app-compat"]="fire-core-compat",Ne["@firebase/analytics"]="fire-analytics",Ne["@firebase/analytics-compat"]="fire-analytics-compat",Ne["@firebase/app-check"]="fire-app-check",Ne["@firebase/app-check-compat"]="fire-app-check-compat",Ne["@firebase/auth"]="fire-auth",Ne["@firebase/auth-compat"]="fire-auth-compat",Ne["@firebase/database"]="fire-rtdb",Ne["@firebase/database-compat"]="fire-rtdb-compat",Ne["@firebase/functions"]="fire-fn",Ne["@firebase/functions-compat"]="fire-fn-compat",Ne["@firebase/installations"]="fire-iid",Ne["@firebase/installations-compat"]="fire-iid-compat",Ne["@firebase/messaging"]="fire-fcm",Ne["@firebase/messaging-compat"]="fire-fcm-compat",Ne["@firebase/performance"]="fire-perf",Ne["@firebase/performance-compat"]="fire-perf-compat",Ne["@firebase/remote-config"]="fire-rc",Ne["@firebase/remote-config-compat"]="fire-rc-compat",Ne["@firebase/storage"]="fire-gcs",Ne["@firebase/storage-compat"]="fire-gcs-compat",Ne["@firebase/firestore"]="fire-fst",Ne["@firebase/firestore-compat"]="fire-fst-compat",Ne["fire-js"]="fire-js",Ne.firebase="fire-js-all",Ne),Se=new Map,Te=new Map;function Ce(t,n){try{t.container.addComponent(n)}catch(e){we.debug("Component ".concat(n.name," failed to register with FirebaseApp ").concat(t.name),e)}}function Ae(e,t){e.container.addOrOverwriteComponent(t)}function Oe(e){var t,n,r=e.name;if(Te.has(r))return we.debug("There were multiple attempts to register component ".concat(r,".")),!1;Te.set(r,e);try{for(var i=d(Se.values()),a=i.next();!a.done;a=i.next())Ce(a.value,e)}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!0}function De(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var Ne=((at={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",at["bad-app-name"]="Illegal App name: '{$appName}",at["duplicate-app"]="Firebase App named '{$appName}' already exists with different options or config",at["app-deleted"]="Firebase App named '{$appName}' already deleted",at["no-options"]="Need to provide options, when not being deployed to hosting via source.",at["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",at["invalid-log-argument"]="First argument to `onLog` must be null or a function.",at["idb-open"]="Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",at["idb-get"]="Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",at["idb-set"]="Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",at["idb-delete"]="Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.",at),Pe=new C("app","Firebase",Ne),ke=(Object.defineProperty(Me.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(Me.prototype,"name",{get:function(){return this.checkDestroyed(),this._name},enumerable:!1,configurable:!0}),Object.defineProperty(Me.prototype,"options",{get:function(){return this.checkDestroyed(),this._options},enumerable:!1,configurable:!0}),Object.defineProperty(Me.prototype,"config",{get:function(){return this.checkDestroyed(),this._config},enumerable:!1,configurable:!0}),Object.defineProperty(Me.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Object.defineProperty(Me.prototype,"isDeleted",{get:function(){return this._isDeleted},set:function(e){this._isDeleted=e},enumerable:!1,configurable:!0}),Me.prototype.checkDestroyed=function(){if(this.isDeleted)throw Pe.create("app-deleted",{appName:this._name})},Me);function Me(e,t,n){var r=this;this._isDeleted=!1,this._options=p({},e),this._config=p({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new R("app",function(){return r},"PUBLIC"))}var Le="9.17.1-canary.b30186ffc";function Be(e,t){var n,r,i=e,a=p({name:Ee,automaticDataCollectionEnabled:!1},t="object"!=typeof(t=void 0===t?{}:t)?{name:t}:t),o=a.name;if("string"!=typeof o||!o)throw Pe.create("bad-app-name",{appName:String(o)});if(!(i=i||b()))throw Pe.create("no-options");var s=Se.get(o);if(s){if(N(i,s.options)&&N(a,s.config))return s;throw Pe.create("duplicate-app",{appName:o})}var c=new H(o);try{for(var u=d(Te.values()),l=u.next();!l.done;l=u.next()){var f=l.value;c.addComponent(f)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}a=new ke(i,a,c);return Se.set(o,a),a}function Re(n){return f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return(t=n.name,Se.has(t))?(Se.delete(t),[4,Promise.all(n.container.getProviders().map(function(e){return e.delete()}))]):[3,2];case 1:e.sent(),n.isDeleted=!0,e.label=2;case 2:return[2]}})})}function je(e,t,n){var r=null!==(o=Ie[e])&&void 0!==o?o:e;n&&(r+="-".concat(n));var i=r.match(/\s|\//),a=t.match(/\s|\//);if(i||a){var o=['Unable to register library "'.concat(r,'" with version "').concat(t,'":')];return i&&o.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),i&&a&&o.push("and"),a&&o.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void we.warn(o.join(" "))}Oe(new R("".concat(r,"-version"),function(){return{library:r,version:t}},"VERSION"))}function Fe(e,t){if(null!==e&&"function"!=typeof e)throw Pe.create("invalid-log-argument");Z(e,t)}function xe(e){var t;t=e,q.forEach(function(e){e.setLogLevel(t)})}var Ue="firebase-heartbeat-database",He=1,ze="firebase-heartbeat-store",Ve=null;function qe(){return Ve=Ve||pe(Ue,He,{upgrade:function(e,t){0===t&&e.createObjectStore(ze)}}).catch(function(e){throw Pe.create("idb-open",{originalErrorMessage:e.message})})}function We(r,i){return f(this,void 0,void 0,function(){var t,n;return h(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,qe()];case 1:return n=e.sent(),t=n.transaction(ze,"readwrite"),[4,t.objectStore(ze).put(i,$e(r))];case 2:return e.sent(),[2,t.done];case 3:return(n=e.sent())instanceof S?we.warn(n.message):(n=Pe.create("idb-set",{originalErrorMessage:null==n?void 0:n.message}),we.warn(n.message)),[3,4];case 4:return[2]}})})}function $e(e){return"".concat(e.name,"!").concat(e.options.appId)}var Ke=(Je.prototype.triggerHeartbeat=function(){return f(this,void 0,void 0,function(){var t,n,r;return h(this,function(e){switch(e.label){case 0:return(t=this.container.getProvider("platform-logger").getImmediate(),t=t.getPlatformInfoString(),n=Ge(),null!==this._heartbeatsCache)?[3,2]:[4,(r=this)._heartbeatsCachePromise];case 1:r._heartbeatsCache=e.sent(),e.label=2;case 2:return this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(function(e){return e.date===n})?[2]:(this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),[2,this._storage.overwrite(this._heartbeatsCache)])}})})},Je.prototype.getHeartbeatsHeader=function(){return f(this,void 0,void 0,function(){var t,n,r;return h(this,function(e){switch(e.label){case 0:return null!==this._heartbeatsCache?[3,2]:[4,this._heartbeatsCachePromise];case 1:e.sent(),e.label=2;case 2:return null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length?[2,""]:(t=Ge(),n=function(e,n){var t,r;void 0===n&&(n=1024);var i=[],a=e.slice();try{for(var o=d(e),s=o.next();!s.done;s=o.next())if("break"===function(t){var e=i.find(function(e){return e.agent===t.agent});if(e){if(e.dates.push(t.date),Qe(i)>n)return e.dates.pop(),"break"}else if(i.push({agent:t.agent,dates:[t.date]}),Qe(i)>n)return i.pop(),"break";a=a.slice(1)}(s.value))break}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return{heartbeatsToSend:i,unsentEntries:a}}(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,n=n.unsentEntries,r=s(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,0<n.length?(this._heartbeatsCache.heartbeats=n,[4,this._storage.overwrite(this._heartbeatsCache)]):[3,4]);case 3:return e.sent(),[3,5];case 4:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache),e.label=5;case 5:return[2,r]}})})},Je);function Je(e){var t=this;this.container=e,this._heartbeatsCache=null;var n=this.container.getProvider("app").getImmediate();this._storage=new Xe(n),this._heartbeatsCachePromise=this._storage.read().then(function(e){return t._heartbeatsCache=e})}function Ge(){return(new Date).toISOString().substring(0,10)}var Ye,Xe=(Ze.prototype.runIndexedDBEnvironmentCheck=function(){return f(this,void 0,void 0,function(){return h(this,function(e){return w()?[2,E().then(function(){return!0}).catch(function(){return!1})]:[2,!1]})})},Ze.prototype.read=function(){return f(this,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return e.sent()?[3,2]:[2,{heartbeats:[]}];case 2:return[4,function(n){return f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,qe()];case 1:return[2,e.sent().transaction(ze).objectStore(ze).get($e(n))];case 2:return(t=e.sent())instanceof S?we.warn(t.message):(t=Pe.create("idb-get",{originalErrorMessage:null==t?void 0:t.message}),we.warn(t.message)),[3,3];case 3:return[2]}})})}(this.app)];case 3:return[2,e.sent()||{heartbeats:[]}]}})})},Ze.prototype.overwrite=function(n){var r;return f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return e.sent()?[3,2]:[2];case 2:return[4,this.read()];case 3:return t=e.sent(),[2,We(this.app,{lastSentHeartbeatDate:null!==(r=n.lastSentHeartbeatDate)&&void 0!==r?r:t.lastSentHeartbeatDate,heartbeats:n.heartbeats})]}})})},Ze.prototype.add=function(n){var r;return f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return e.sent()?[3,2]:[2];case 2:return[4,this.read()];case 3:return t=e.sent(),[2,We(this.app,{lastSentHeartbeatDate:null!==(r=n.lastSentHeartbeatDate)&&void 0!==r?r:t.lastSentHeartbeatDate,heartbeats:o(o([],v(t.heartbeats),!1),v(n.heartbeats),!1)})]}})})},Ze);function Ze(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}function Qe(e){return s(JSON.stringify({version:2,heartbeats:e})).length}Ye="",Oe(new R("platform-logger",function(e){return new me(e)},"PRIVATE")),Oe(new R("heartbeat",function(e){return new Ke(e)},"PRIVATE")),je(ye,_e,Ye),je(ye,_e,"esm5"),je("fire-js","");var et=Object.freeze({__proto__:null,SDK_VERSION:Le,_DEFAULT_ENTRY_NAME:Ee,_addComponent:Ce,_addOrOverwriteComponent:Ae,_apps:Se,_clearComponents:function(){Te.clear()},_components:Te,_getProvider:De,_registerComponent:Oe,_removeServiceInstance:function(e,t,n){void 0===n&&(n=Ee),De(e,t).clearInstance(n)},deleteApp:Re,getApp:function(e){var t=Se.get(e=void 0===e?Ee:e);if(!t&&e===Ee)return Be();if(!t)throw Pe.create("no-app",{appName:e});return t},getApps:function(){return Array.from(Se.values())},initializeApp:Be,onLog:Fe,registerVersion:je,setLogLevel:xe,FirebaseError:S}),tt=(Object.defineProperty(nt.prototype,"automaticDataCollectionEnabled",{get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(nt.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(nt.prototype,"options",{get:function(){return this._delegate.options},enumerable:!1,configurable:!0}),nt.prototype.delete=function(){var t=this;return new Promise(function(e){t._delegate.checkDestroyed(),e()}).then(function(){return t.firebase.INTERNAL.removeApp(t.name),Re(t._delegate)})},nt.prototype._getService=function(e,t){var n;void 0===t&&(t=Ee),this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})},nt.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=Ee),this._delegate.container.getProvider(e).clearInstance(t)},nt.prototype._addComponent=function(e){Ce(this._delegate,e)},nt.prototype._addOrOverwriteComponent=function(e){Ae(this._delegate,e)},nt.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},nt);function nt(e,t){var n=this;this._delegate=e,this.firebase=t,Ce(e,new R("app-compat",function(){return n},"PUBLIC")),this.container=e.container}var Ne=((at={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",at["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",at),rt=new C("app-compat","Firebase",Ne);function it(i){var a={},o={__esModule:!0,initializeApp:function(e,t){void 0===t&&(t={});var n=Be(e,t);if(D(a,n.name))return a[n.name];var r=new i(n,o);return a[n.name]=r},app:s,registerVersion:je,setLogLevel:xe,onLog:Fe,apps:null,SDK_VERSION:Le,INTERNAL:{registerComponent:function(n){var r=n.name,t=r.replace("-compat","");{var e;Oe(n)&&"PUBLIC"===n.type&&(e=function(e){if("function"!=typeof(e=void 0===e?s():e)[t])throw rt.create("invalid-app-argument",{appName:r});return e[t]()},void 0!==n.serviceProps&&c(e,n.serviceProps),o[t]=e,i.prototype[t]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._getService.bind(this,r).apply(this,n.multipleInstances?e:[])})}return"PUBLIC"===n.type?o[t]:null},removeApp:function(e){delete a[e]},useAsService:function(e,t){return"serverAuth"!==t?t:null},modularAPIs:et}};function s(e){if(!D(a,e=e||Ee))throw rt.create("no-app",{appName:e});return a[e]}return o.default=o,Object.defineProperty(o,"apps",{get:function(){return Object.keys(a).map(function(e){return a[e]})}}),s.App=i,o}var at=function e(){var t=it(tt);return t.INTERNAL=p(p({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){c(t,e)},createSubscribe:k,ErrorFactory:C,deepExtend:c}),t}(),Ne=new Y("@firebase/app-compat");"object"==typeof self&&self.self===self&&void 0!==self.firebase&&(Ne.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),(st=self.firebase.SDK_VERSION)&&0<=st.indexOf("LITE")&&Ne.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "));var ot=at;je("@firebase/app-compat","0.2.3-canary.b30186ffc",void 0);ot.registerVersion("firebase","9.17.1-canary.b30186ffc","app-compat");var st="@firebase/installations",Ne="0.6.3-canary.b30186ffc",ct=1e4,ut="w:".concat(Ne),lt="FIS_v2",ft="https://firebaseinstallations.googleapis.com/v1",pt=36e5,at=((at={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',at["not-registered"]="Firebase Installation is not registered.",at["installation-not-found"]="Firebase Installation not found.",at["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',at["app-offline"]="Could not process request. Application offline.",at["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",at),ht=new C("installations","Installations",at);function dt(e){return e instanceof S&&e.code.includes("request-failed")}function vt(e){var t=e.projectId;return"".concat(ft,"/projects/").concat(t,"/installations")}function gt(e){return{token:e.token,requestStatus:2,expiresIn:(e=e.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()}}function mt(n,r){return f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,r.json()];case 1:return t=e.sent(),t=t.error,[2,ht.create("request-failed",{requestName:n,serverCode:t.code,serverMessage:t.message,serverStatus:t.status})]}})})}function bt(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function yt(e,t){var n=t.refreshToken,r=bt(e);return r.append("Authorization",(e=n,"".concat(lt," ").concat(e))),r}function _t(n){return f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,n()];case 1:return 500<=(t=e.sent()).status&&t.status<600?[2,n()]:[2,t]}})})}function wt(t){return new Promise(function(e){setTimeout(e,t)})}var Et=/^[cdef][\w-]{21}$/,It="";function St(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return btoa(String.fromCharCode.apply(String,o([],v(e),!1))).replace(/\+/g,"-").replace(/\//g,"_")}(e).substr(0,22);return Et.test(t)?t:It}catch(e){return It}}function Tt(e){return"".concat(e.appName,"!").concat(e.appId)}var Ct=new Map;function At(e,t){var n=Tt(e);Ot(n,t),function(e,t){var n=function(){!Dt&&"BroadcastChannel"in self&&((Dt=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){Ot(e.data.key,e.data.fid)});return Dt}();n&&n.postMessage({key:e,fid:t});0===Ct.size&&Dt&&(Dt.close(),Dt=null)}(n,t)}function Ot(e,t){var n,r,i=Ct.get(e);if(i)try{for(var a=d(i),o=a.next();!o.done;o=a.next())(0,o.value)(t)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}var Dt=null;var Nt="firebase-installations-store",Pt=null;function kt(){return Pt=Pt||pe("firebase-installations-database",1,{upgrade:function(e,t){0===t&&e.createObjectStore(Nt)}})}function Mt(a,o){return f(this,void 0,void 0,function(){var t,n,r,i;return h(this,function(e){switch(e.label){case 0:return t=Tt(a),[4,kt()];case 1:return r=e.sent(),n=r.transaction(Nt,"readwrite"),[4,(r=n.objectStore(Nt)).get(t)];case 2:return i=e.sent(),[4,r.put(o,t)];case 3:return e.sent(),[4,n.done];case 4:return e.sent(),i&&i.fid===o.fid||At(a,o.fid),[2,o]}})})}function Lt(r){return f(this,void 0,void 0,function(){var t,n;return h(this,function(e){switch(e.label){case 0:return t=Tt(r),[4,kt()];case 1:return n=e.sent(),[4,(n=n.transaction(Nt,"readwrite")).objectStore(Nt).delete(t)];case 2:return e.sent(),[4,n.done];case 3:return e.sent(),[2]}})})}function Bt(o,s){return f(this,void 0,void 0,function(){var t,n,r,i,a;return h(this,function(e){switch(e.label){case 0:return t=Tt(o),[4,kt()];case 1:return r=e.sent(),n=r.transaction(Nt,"readwrite"),[4,(r=n.objectStore(Nt)).get(t)];case 2:return i=e.sent(),void 0!==(a=s(i))?[3,4]:[4,r.delete(t)];case 3:return e.sent(),[3,6];case 4:return[4,r.put(a,t)];case 5:e.sent(),e.label=6;case 6:return[4,n.done];case 7:return e.sent(),!a||i&&i.fid===a.fid||At(o,a.fid),[2,a]}})})}function Rt(i){return f(this,void 0,void 0,function(){var n,t,r;return h(this,function(e){switch(e.label){case 0:return[4,Bt(i.appConfig,function(e){var t=Ft(e||{fid:St(),registrationStatus:0}),t=function(e,t){{if(0!==t.registrationStatus)return 1===t.registrationStatus?{installationEntry:t,registrationPromise:function(i){return f(this,void 0,void 0,function(){var t,n,r;return h(this,function(e){switch(e.label){case 0:return[4,jt(i.appConfig)];case 1:t=e.sent(),e.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,wt(100)];case 3:return e.sent(),[4,jt(i.appConfig)];case 4:return t=e.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,Rt(i)];case 6:return r=e.sent(),n=r.installationEntry,(r=r.registrationPromise)?[2,r]:[2,n];case 7:return[2,t]}})})}(e)}:{installationEntry:t};if(!navigator.onLine){var n=Promise.reject(ht.create("app-offline"));return{installationEntry:t,registrationPromise:n}}var r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},n=function(r,i){return f(this,void 0,void 0,function(){var t,n;return h(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,7]),[4,function(e,t){var s=e.appConfig,c=e.heartbeatServiceProvider,u=t.fid;return f(this,void 0,void 0,function(){var t,n,r,i,a,o;return h(this,function(e){switch(e.label){case 0:return t=vt(s),n=bt(s),(r=c.getImmediate({optional:!0}))?[4,r.getHeartbeatsHeader()]:[3,2];case 1:(r=e.sent())&&n.append("x-firebase-client",r),e.label=2;case 2:return o={fid:u,authVersion:lt,appId:s.appId,sdkVersion:ut},i={method:"POST",headers:n,body:JSON.stringify(o)},[4,_t(function(){return fetch(t,i)})];case 3:return(a=e.sent()).ok?[4,a.json()]:[3,5];case 4:return o=e.sent(),[2,{fid:o.fid||u,registrationStatus:2,refreshToken:o.refreshToken,authToken:gt(o.authToken)}];case 5:return[4,mt("Create Installation",a)];case 6:throw e.sent()}})})}(r,i)];case 1:return t=e.sent(),[2,Mt(r.appConfig,t)];case 2:return dt(n=e.sent())&&409===n.customData.serverCode?[4,Lt(r.appConfig)]:[3,4];case 3:return e.sent(),[3,6];case 4:return[4,Mt(r.appConfig,{fid:i.fid,registrationStatus:0})];case 5:e.sent(),e.label=6;case 6:throw n;case 7:return[2]}})})}(e,r);return{installationEntry:r,registrationPromise:n}}}(i,t);return n=t.registrationPromise,t.installationEntry})];case 1:return(t=e.sent()).fid!==It?[3,3]:(r={},[4,n]);case 2:return[2,(r.installationEntry=e.sent(),r)];case 3:return[2,{installationEntry:t,registrationPromise:n}]}})})}function jt(e){return Bt(e,function(e){if(!e)throw ht.create("installation-not-found");return Ft(e)})}function Ft(e){return 1===(t=e).registrationStatus&&t.registrationTime+ct<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function xt(e,c){var u=e.appConfig,l=e.heartbeatServiceProvider;return f(this,void 0,void 0,function(){var n,r,i,a,o,s;return h(this,function(e){switch(e.label){case 0:return t=c.fid,n="".concat(vt(u),"/").concat(t,"/authTokens:generate"),r=yt(u,c),(i=l.getImmediate({optional:!0}))?[4,i.getHeartbeatsHeader()]:[3,2];case 1:(i=e.sent())&&r.append("x-firebase-client",i),e.label=2;case 2:return s={installation:{sdkVersion:ut,appId:u.appId}},a={method:"POST",headers:r,body:JSON.stringify(s)},[4,_t(function(){return fetch(n,a)})];case 3:return(o=e.sent()).ok?[4,o.json()]:[3,5];case 4:return s=e.sent(),[2,gt(s)];case 5:return[4,mt("Generate Auth Token",o)];case 6:throw e.sent()}var t})})}function Ut(i,a){return void 0===a&&(a=!1),f(this,void 0,void 0,function(){var r,t,n;return h(this,function(e){switch(e.label){case 0:return[4,Bt(i.appConfig,function(e){if(!zt(e))throw ht.create("not-registered");var t,n=e.authToken;if(a||2!==(t=n).requestStatus||function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+pt}(t)){if(1===n.requestStatus)return r=function(r,i){return f(this,void 0,void 0,function(){var t,n;return h(this,function(e){switch(e.label){case 0:return[4,Ht(r.appConfig)];case 1:t=e.sent(),e.label=2;case 2:return 1!==t.authToken.requestStatus?[3,5]:[4,wt(100)];case 3:return e.sent(),[4,Ht(r.appConfig)];case 4:return t=e.sent(),[3,2];case 5:return 0===(n=t.authToken).requestStatus?[2,Ut(r,i)]:[2,n]}})})}(i,a),e;if(!navigator.onLine)throw ht.create("app-offline");n=(t=e,n={requestStatus:1,requestTime:Date.now()},p(p({},t),{authToken:n}));return r=function(i,a){return f(this,void 0,void 0,function(){var t,n,r;return h(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,8]),[4,xt(i,a)];case 1:return t=e.sent(),r=p(p({},a),{authToken:t}),[4,Mt(i.appConfig,r)];case 2:return e.sent(),[2,t];case 3:return!dt(n=e.sent())||401!==n.customData.serverCode&&404!==n.customData.serverCode?[3,5]:[4,Lt(i.appConfig)];case 4:return e.sent(),[3,7];case 5:return r=p(p({},a),{authToken:{requestStatus:0}}),[4,Mt(i.appConfig,r)];case 6:e.sent(),e.label=7;case 7:throw n;case 8:return[2]}})})}(i,n),n}return e})];case 1:return t=e.sent(),r?[4,r]:[3,3];case 2:return n=e.sent(),[3,4];case 3:n=t.authToken,e.label=4;case 4:return[2,n]}})})}function Ht(e){return Bt(e,function(e){if(!zt(e))throw ht.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+ct<Date.now()?p(p({},e),{authToken:{requestStatus:0}}):e})}function zt(e){return void 0!==e&&2===e.registrationStatus}function Vt(n,r){return void 0===r&&(r=!1),f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,function(n){return f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,Rt(n)];case 1:return(t=e.sent().registrationPromise)?[4,t]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}})})}(t=n)];case 1:return e.sent(),[4,Ut(t,r)];case 2:return[2,e.sent().token]}})})}function qt(e){return ht.create("missing-app-config-values",{valueName:e})}function Wt(e){var t=De(e.getProvider("app").getImmediate(),$t).getImmediate();return{getId:function(){return function(i){return f(this,void 0,void 0,function(){var t,n,r;return h(this,function(e){switch(e.label){case 0:return[4,Rt(t=i)];case 1:return n=e.sent(),r=n.installationEntry,(n.registrationPromise||Ut(t)).catch(console.error),[2,r.fid]}})})}(t)},getToken:function(e){return Vt(t,e)}}}var $t="installations";Oe(new R($t,function(e){var t=e.getProvider("app").getImmediate();return{app:t,appConfig:function(e){var t,n;if(!e||!e.options)throw qt("App Configuration");if(!e.name)throw qt("App Name");try{for(var r=d(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var a=i.value;if(!e.options[a])throw qt(a)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),heartbeatServiceProvider:De(t,"heartbeat"),_delete:function(){return Promise.resolve()}}},"PUBLIC")),Oe(new R("installations-internal",Wt,"PRIVATE")),je(st,Ne),je(st,Ne,"esm5");var Kt,Jt,Gt="@firebase/performance",Yt="0.6.3-canary.b30186ffc",Xt=Yt,Zt="FB-PERF-TRACE-MEASURE",Qt="@firebase/performance/config",en="@firebase/performance/configexpire",st="Performance",Ne=((Ne={})["trace started"]="Trace {$traceName} was started before.",Ne["trace stopped"]="Trace {$traceName} is not running.",Ne["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",Ne["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",Ne["no window"]="Window is not available.",Ne["no app id"]="App id is not available.",Ne["no project id"]="Project id is not available.",Ne["no api key"]="Api key is not available.",Ne["invalid cc log"]="Attempted to queue invalid cc event",Ne["FB not default"]="Performance can only start when Firebase app instance is the default one.",Ne["RC response not ok"]="RC response is not ok",Ne["invalid attribute name"]="Attribute name {$attributeName} is invalid.",Ne["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",Ne["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",Ne["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",Ne["already initialized"]="initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance.",Ne),tn=new C("performance",st,Ne),nn=new Y(st);nn.logLevel=V.INFO;var rn,an,on=(sn.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},sn.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},sn.prototype.measure=function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)},sn.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},sn.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},sn.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},sn.prototype.requiredApisAvailable=function(){return fetch&&Promise&&"undefined"!=typeof navigator&&navigator.cookieEnabled?!!w()||(nn.info("IndexedDB is not supported by current browswer"),!1):(nn.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},sn.prototype.setupObserver=function(e,i){this.PerformanceObserver&&new this.PerformanceObserver(function(e){for(var t=0,n=e.getEntries();t<n.length;t++){var r=n[t];i(r)}}).observe({entryTypes:[e]})},sn.getInstance=function(){return Kt=void 0===Kt?new sn(Jt):Kt},sn);function sn(e){if(!(this.window=e))throw tn.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}function cn(e,t){var n=e.length-t.length;if(n<0||1<n)throw tn.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}var un,ln,fn=(pn.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},pn.getInstance=function(){return an=void 0===an?new pn:an},pn);function pn(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=cn("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=cn("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}(ln=un=un||{})[ln.UNKNOWN=0]="UNKNOWN",ln[ln.VISIBLE=1]="VISIBLE",ln[ln.HIDDEN=2]="HIDDEN";var hn=["firebase_","google_","ga_"],dn=new RegExp("^[a-zA-Z]\\w*$");function vn(){switch(on.getInstance().document.visibilityState){case"visible":return un.VISIBLE;case"hidden":return un.HIDDEN;default:return un.UNKNOWN}}function gn(e){var t=null===(t=e.options)||void 0===t?void 0:t.appId;if(!t)throw tn.create("no app id");return t}var mn="0.0.1",bn={loggingEnabled:!0},yn="FIREBASE_INSTALLATIONS_AUTH";function _n(e,t){var r,i,n=function(){var e=on.getInstance().localStorage;if(e){var t=e.getItem(en);if(t&&function(e){return Number(e)>Date.now()}(t)){e=e.getItem(Qt);if(e)try{return JSON.parse(e)}catch(e){return}}}}();return n?(En(n),Promise.resolve()):(i=t,function(e){var t=e.getToken();return t.then(function(e){}),t}((r=e).installations).then(function(e){var t=function(e){var t=null===(t=e.options)||void 0===t?void 0:t.projectId;if(!t)throw tn.create("no project id");return t}(r.app),n=function(e){var t=null===(t=e.options)||void 0===t?void 0:t.apiKey;if(!t)throw tn.create("no api key");return t}(r.app),n="https://firebaseremoteconfig.googleapis.com/v1/projects/".concat(t,"/namespaces/fireperf:fetch?key=").concat(n),n=new Request(n,{method:"POST",headers:{Authorization:"".concat(yn," ").concat(e)},body:JSON.stringify({app_instance_id:i,app_instance_id_token:e,app_id:gn(r.app),app_version:Xt,sdk_version:mn})});return fetch(n).then(function(e){if(e.ok)return e.json();throw tn.create("RC response not ok")})}).catch(function(){nn.info(wn)}).then(En).then(function(e){var t;e=e,t=on.getInstance().localStorage,e&&t&&(t.setItem(Qt,JSON.stringify(e)),t.setItem(en,String(Date.now()+60*fn.getInstance().configTimeToLive*60*1e3)))},function(){}))}var wn="Could not fetch config, will use default configs";function En(e){if(!e)return e;var t=fn.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=bn.loggingEnabled,n.fpr_log_source?t.logSource=Number(n.fpr_log_source):bn.logSource&&(t.logSource=bn.logSource),n.fpr_log_endpoint_url?t.logEndPointUrl=n.fpr_log_endpoint_url:bn.logEndPointUrl&&(t.logEndPointUrl=bn.logEndPointUrl),n.fpr_log_transport_key?t.transportKey=n.fpr_log_transport_key:bn.transportKey&&(t.transportKey=bn.transportKey),void 0!==n.fpr_vc_network_request_sampling_rate?t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate):void 0!==bn.networkRequestsSamplingRate&&(t.networkRequestsSamplingRate=bn.networkRequestsSamplingRate),void 0!==n.fpr_vc_trace_sampling_rate?t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate):void 0!==bn.tracesSamplingRate&&(t.tracesSamplingRate=bn.tracesSamplingRate),t.logTraceAfterSampling=In(t.tracesSamplingRate),t.logNetworkAfterSampling=In(t.networkRequestsSamplingRate),e}function In(e){return Math.random()<=e}var Sn,Tn=1;function Cn(e){var n;return Tn=2,Sn=Sn||(n=e,function(){var n=on.getInstance().document;return new Promise(function(e){var t;n&&"complete"!==n.readyState?(t=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",t),e())},n.addEventListener("readystatechange",t)):e()})}().then(function(){return e=n.installations,(t=e.getId()).then(function(e){rn=e}),t;var e,t}).then(function(e){return _n(n,e)}).then(An,An))}function An(){Tn=3}var On,Dn=1e4,Nn=3,Pn=1e3,kn=Nn,Mn=[],Ln=!1;function Bn(e){setTimeout(function(){var e,t;if(0!==kn)return Mn.length?(e=Mn.splice(0,Pn),t=e.map(function(e){return{source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)}}),void function(e,r){return function(e){var t=fn.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}(e).then(function(e){return e.ok||nn.info("Call to Firebase backend failed."),e.json()}).then(function(e){var t=Number(e.nextRequestWaitMillis),n=Dn;isNaN(t)||(n=Math.max(t,n));t=e.logResponseDetails;Array.isArray(t)&&0<t.length&&"RETRY_REQUEST_LATER"===t[0].responseAction&&(Mn=o(o([],r,!0),Mn,!0),nn.info("Retry transport request later.")),kn=Nn,Bn(n)})}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:fn.getInstance().logSource,log_event:t},e).catch(function(){Mn=o(o([],e,!0),Mn,!0),kn--,nn.info("Tries left: ".concat(kn,".")),Bn(Dn)})):Bn(Dn)},e)}function Rn(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(e){if(!e.eventTime||!e.message)throw tn.create("invalid cc log");Mn=o(o([],Mn,!0),[e],!1)}({message:n.apply(void 0,e),eventTime:Date.now()})}}function jn(e,t){(On=On||Rn(Un))(e,t)}function Fn(e){var t=fn.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&on.getInstance().requiredApisAvailable()&&(e.isAuto&&vn()!==un.VISIBLE||(3===Tn?xn(e):Cn(e.performanceController).then(function(){return xn(e)},function(){return xn(e)})))}function xn(e){var t;!rn||(t=fn.getInstance()).loggingEnabled&&t.logTraceAfterSampling&&setTimeout(function(){return jn(e,1)},0)}function Un(e,t){return 0===t?(n={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:Hn(e.performanceController.app),network_request_metric:n},JSON.stringify(n)):function(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=e.counters);var n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=n);t={application_info:Hn(e.performanceController.app),trace_metric:t};return JSON.stringify(t)}(e);var n}function Hn(e){return{google_app_id:gn(e),app_instance_id:rn,web_app_info:{sdk_version:Xt,page_url:on.getInstance().getUrl(),service_worker_status:null!=(t=on.getInstance().navigator)&&t.serviceWorker?t.serviceWorker.controller?2:3:1,visibility_state:vn(),effective_connection_type:function(){var e=on.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var zn=["_fp","_fcp","_fid"];var Vn=(qn.prototype.start=function(){if(1!==this.state)throw tn.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},qn.prototype.stop=function(){if(2!==this.state)throw tn.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Fn(this)},qn.prototype.record=function(e,t,n){if(e<=0)throw tn.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw tn.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=p({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var a=i[r];isNaN(Number(n.metrics[a]))||(this.counters[a]=Math.floor(Number(n.metrics[a])))}Fn(this)},qn.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)},qn.prototype.putMetric=function(e,t){if(r=e,i=this.name,0===r.length||100<r.length||!(i&&i.startsWith("_wt_")&&-1<zn.indexOf(r))&&r.startsWith("_"))throw tn.create("invalid custom metric name",{customMetricName:e});var n,r,i;this.counters[e]=(t=null!=t?t:0,(n=Math.floor(t))<t&&nn.info("Metric value should be an Integer, setting the value as : ".concat(n,".")),n)},qn.prototype.getMetric=function(e){return this.counters[e]||0},qn.prototype.putAttribute=function(e,t){var n,r,i=!(0===(n=e).length||40<n.length)&&(!hn.some(function(e){return n.startsWith(e)})&&!!n.match(dn)),a=0!==(r=t).length&&r.length<=100;if(i&&a)this.customAttributes[e]=t;else{if(!i)throw tn.create("invalid attribute name",{attributeName:e});if(!a)throw tn.create("invalid attribute value",{attributeValue:t})}},qn.prototype.getAttribute=function(e){return this.customAttributes[e]},qn.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},qn.prototype.getAttributes=function(){return p({},this.customAttributes)},qn.prototype.setStartTime=function(e){this.startTimeUs=e},qn.prototype.setDuration=function(e){this.durationUs=e},qn.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),e=e&&e[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},qn.createOobTrace=function(e,t,n,r){var i,a=on.getInstance().getUrl();a&&(i=new qn(e,"_wt_"+a,!0),a=Math.floor(1e3*on.getInstance().getTimeOrigin()),i.setStartTime(a),t&&t[0]&&(i.setDuration(Math.floor(1e3*t[0].duration)),i.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),i.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),i.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),n&&((a=n.find(function(e){return"first-paint"===e.name}))&&a.startTime&&i.putMetric("_fp",Math.floor(1e3*a.startTime)),(a=n.find(function(e){return"first-contentful-paint"===e.name}))&&a.startTime&&i.putMetric("_fcp",Math.floor(1e3*a.startTime)),r&&i.putMetric("_fid",Math.floor(1e3*r))),Fn(i))},qn.createUserTimingTrace=function(e,t){Fn(new qn(e,t,!1,t))},qn);function qn(e,t,n,r){void 0===n&&(n=!1),this.performanceController=e,this.name=t,this.isAuto=n,this.state=1,this.customAttributes={},this.counters={},this.api=on.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="".concat("FB-PERF-TRACE-START","-").concat(this.randomId,"-").concat(this.name),this.traceStopMark="".concat("FB-PERF-TRACE-STOP","-").concat(this.randomId,"-").concat(this.name),this.traceMeasure=r||"".concat(Zt,"-").concat(this.randomId,"-").concat(this.name),r&&this.calculateTraceMetrics())}function Wn(e,t){var n,r,i,a,o=t;o&&void 0!==o.responseStart&&(i=on.getInstance().getTimeOrigin(),a=Math.floor(1e3*(o.startTime+i)),r=o.responseStart?Math.floor(1e3*(o.responseStart-o.startTime)):void 0,i=Math.floor(1e3*(o.responseEnd-o.startTime)),o={performanceController:e,url:o.name&&o.name.split("?")[0],responsePayloadBytes:o.transferSize,startTimeUs:a,timeToResponseInitiatedUs:r,timeToResponseCompletedUs:i},n=o,(a=fn.getInstance()).instrumentationEnabled&&(r=n.url,i=a.logEndPointUrl.split("?")[0],o=a.flTransportEndpointUrl.split("?")[0],r!==i&&r!==o&&a.loggingEnabled&&a.logNetworkAfterSampling&&setTimeout(function(){return jn(n,0)},0)))}var $n=5e3;function Kn(e){rn&&(setTimeout(function(){return function(t){var e=on.getInstance(),n=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");{var i;e.onFirstInputDelay?(i=setTimeout(function(){Vn.createOobTrace(t,n,r),i=void 0},$n),e.onFirstInputDelay(function(e){i&&(clearTimeout(i),Vn.createOobTrace(t,n,r,e))})):Vn.createOobTrace(t,n,r)}}(e)},0),setTimeout(function(){return function(t){for(var e=on.getInstance(),n=e.getEntriesByType("resource"),r=0,i=n;r<i.length;r++){var a=i[r];Wn(t,a)}e.setupObserver("resource",function(e){return Wn(t,e)})}(e)},0),setTimeout(function(){return function(t){for(var e=on.getInstance(),n=e.getEntriesByType("measure"),r=0,i=n;r<i.length;r++){var a=i[r];Jn(t,a)}e.setupObserver("measure",function(e){return Jn(t,e)})}(e)},0))}function Jn(e,t){var n=t.name;n.substring(0,Zt.length)!==Zt&&Vn.createUserTimingTrace(e,n)}var Gn=(Yn.prototype._init=function(e){var t=this;this.initialized||(void 0!==(null==e?void 0:e.dataCollectionEnabled)&&(this.dataCollectionEnabled=e.dataCollectionEnabled),void 0!==(null==e?void 0:e.instrumentationEnabled)&&(this.instrumentationEnabled=e.instrumentationEnabled),on.getInstance().requiredApisAvailable()?E().then(function(e){e&&(Ln||(Bn(5500),Ln=!0),Cn(t).then(function(){return Kn(t)},function(){return Kn(t)}),t.initialized=!0)}).catch(function(e){nn.info("Environment doesn't support IndexedDB: ".concat(e))}):nn.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))},Object.defineProperty(Yn.prototype,"instrumentationEnabled",{get:function(){return fn.getInstance().instrumentationEnabled},set:function(e){fn.getInstance().instrumentationEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(Yn.prototype,"dataCollectionEnabled",{get:function(){return fn.getInstance().dataCollectionEnabled},set:function(e){fn.getInstance().dataCollectionEnabled=e},enumerable:!1,configurable:!0}),Yn);function Yn(e,t){this.app=e,this.installations=t,this.initialized=!1}var Xn="[DEFAULT]";Oe(new R("performance",function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(r.name!==Xn)throw tn.create("FB not default");if("undefined"==typeof window)throw tn.create("no window");Jt=window;i=new Gn(r,i);return i._init(n),i},"PUBLIC")),je(Gt,Yt),je(Gt,Yt,"esm5");var Zn=(Object.defineProperty(Qn.prototype,"instrumentationEnabled",{get:function(){return this._delegate.instrumentationEnabled},set:function(e){this._delegate.instrumentationEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(Qn.prototype,"dataCollectionEnabled",{get:function(){return this._delegate.dataCollectionEnabled},set:function(e){this._delegate.dataCollectionEnabled=e},enumerable:!1,configurable:!0}),Qn.prototype.trace=function(e){return t=this._delegate,t=(n=t)&&n._delegate?n._delegate:n,new Vn(t,e);var t,n},Qn);function Qn(e,t){this.app=e,this._delegate=t}var er;function tr(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("performance").getImmediate();return new Zn(t,n)}(er=ot).INTERNAL.registerComponent(new R("performance-compat",tr,"PUBLIC")),er.registerVersion("@firebase/performance-compat","0.2.3-canary.b30186ffc");return ot.registerVersion("firebase","9.17.1-canary.b30186ffc","compat-lite"),ot});
//# sourceMappingURL=firebase-performance-standalone-compat.js.map
